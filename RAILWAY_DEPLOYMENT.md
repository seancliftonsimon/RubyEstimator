# Railway Deployment Guide

## 🚀 Deploy Your Private Repository to Railway

### Why Railway?

- ✅ **Private repositories supported** (no code exposure)
- ✅ **$5/month** (much cheaper than alternatives)
- ✅ **No Snowflake account required**
- ✅ **Perfect for commercial projects**
- ✅ **One-click deployment**

### Step 1: Prepare Your Repository

Your repository is already ready! The API key is secured and the code is set up properly.

### Step 2: Deploy to Railway

1. **Go to Railway**: Visit [railway.app](https://railway.app)
2. **Sign up/Login**: Use your GitHub account
3. **Create New Project**:

   - Click "New Project"
   - Select "Deploy from GitHub repo"
   - Choose your `RubyEstimator` repository
   - Click "Deploy"

4. **Automatic Configuration**:
   - Railway will use the `Dockerfile` for deployment (more reliable)
   - If Dockerfile fails, it will fall back to `nixpacks.toml`
   - No manual configuration needed - the start command is already specified
   - The app will deploy automatically

### Step 3: Add Your API Key

1. **In your Railway project**, go to the "Variables" tab
2. **Add Environment Variable**:
   - **Name**: `GEMINI_API_KEY`
   - **Value**: `AIzaSyDhOpIAllne17hVDZI2ADXuUcSeE0cPYvY`
3. **Add Port Variable** (if not automatically set):
   - **Name**: `PORT`
   - **Value**: `8501`
4. **Save** - your app will automatically redeploy

### Step 4: Add Password Protection (Optional)

**Note**: By default, your app will run without password protection. To add password protection:

1. **Generate a password hash**:
   ```bash
   python generate_password.py
   ```
2. **Add the password hash to Railway**:
   - Go to "Variables" tab
   - Click "+ New Variable"
   - **Name**: `PASSWORD_HASH`
   - **Value**: (the hash generated by the script)
3. **Save** - your app will now require a password

**To remove password protection**: Simply delete the `PASSWORD_HASH` variable from Railway.

### Step 5: Access Your App

- Your app will be available at: `https://your-app-name.railway.app`
- The URL is private and not discoverable
- Only people you share the URL with can access it
- If you added password protection, users will need the password to access the app

## 🔒 Security Features

✅ **Private Repository**: Your code stays completely private
✅ **Environment Variables**: API key stored securely
✅ **Private URL**: Not listed in public directories
✅ **Commercial Ready**: Perfect for future business use
✅ **No Code Exposure**: Zero risk of exposing your code

## 💰 Cost Comparison

| Platform      | Cost      | Private Repos | Setup Difficulty |
| ------------- | --------- | ------------- | ---------------- |
| **Railway**   | $5/month  | ✅            | ⭐⭐⭐⭐⭐       |
| Streamlit Pro | $10/month | ✅            | ⭐⭐⭐⭐         |
| Render        | $7/month  | ✅            | ⭐⭐⭐⭐         |
| Heroku        | $7/month  | ✅            | ⭐⭐⭐           |

## 🛠️ Local Development

Your local development setup remains unchanged:

```bash
streamlit run app.py
```

## 📊 Monitoring

- **App Performance**: Check Railway dashboard
- **API Usage**: Monitor at [Google AI Studio](https://aistudio.google.com/app/apikey)
- **Logs**: Available in Railway dashboard

## 🔧 Troubleshooting

### App Won't Deploy

- Check that `requirements.txt` is in the root directory
- Verify the start command is correct
- Check Railway logs for errors

### "No start command could be found" Error

If you see this error, it means the deployment configuration files are missing:

- Ensure `nixpacks.toml` is in your repository root
- Verify `railway.json` is present
- Check that `runtime.txt` specifies a valid Python version
- Make sure all files are committed and pushed to GitHub

### Package Installation Errors

If you see errors like "No matching distribution found":

- Check that all package versions in `requirements.txt` are valid
- Ensure `google-generativeai==0.8.5` (not >=0.10)
- Verify all dependencies are available on PyPI

### "pip: command not found" Error

If you see this error, it means the build environment is missing pip:

- Railway will automatically use the `Dockerfile` instead of `nixpacks.toml`
- The Dockerfile includes all necessary system dependencies
- This should resolve the pip installation issues

### Port Configuration Errors

If you see "Invalid value for '--server.port'" errors:

- The app is now configured to use port 8501 by default
- Railway will automatically handle port mapping
- Make sure the `PORT` environment variable is set to `8501` in Railway variables

### API Key Not Working

- Double-check the environment variable name: `GEMINI_API_KEY`
- Ensure the key is valid and has sufficient quota
- Check Railway logs for API errors

### Database Issues

- Railway will create a new database on each deployment
- Consider using Railway's PostgreSQL for production

## 🎯 Benefits for Commercial Use

1. **Private Code**: Perfect for proprietary software
2. **Scalable**: Easy to upgrade as your business grows
3. **Professional**: Reliable hosting for commercial applications
4. **Cost Effective**: Much cheaper than enterprise solutions
5. **No Vendor Lock-in**: Easy to migrate if needed

## 📞 Support

- **Railway Issues**: [Railway Discord](https://discord.gg/railway)
- **Gemini API Issues**: [Google AI Studio Support](https://ai.google.dev/support)
- **Code Issues**: Check your repository issues
