--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 9, in <module>
    from single_call_gemini_resolver import SingleCallGeminiResolver
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 900, in <module>
    single_call_resolver = SingleCallGeminiResolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 148, in __init__
    logger.info("\u2713 API key loaded from Streamlit secrets")
Message: '\u2713 API key loaded from Streamlit secrets'
Arguments: ()
2025-11-23 22:02:48,378 - single_call_gemini_resolver - INFO - Initializing Gemini client...
2025-11-23 22:02:48,819 - single_call_gemini_resolver - INFO - Initializing Gemini client...
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 9, in <module>
    from single_call_gemini_resolver import SingleCallGeminiResolver
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 900, in <module>
    single_call_resolver = SingleCallGeminiResolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 154, in __init__
    self.client = self._initialize_client()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 167, in _initialize_client
    logger.info("\u2713 Gemini client initialized successfully")
Message: '\u2713 Gemini client initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 15, in test_resolver
    resolver = SingleCallGeminiResolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 148, in __init__
    logger.info("\u2713 API key loaded from Streamlit secrets")
Message: '\u2713 API key loaded from Streamlit secrets'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 15, in test_resolver
    resolver = SingleCallGeminiResolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 154, in __init__
    self.client = self._initialize_client()
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 167, in _initialize_client
    logger.info("\u2713 Gemini client initialized successfully")
Message: '\u2713 Gemini client initialized successfully'
Arguments: ()

--- TESTING REAL VEHICLE (2015 Honda Civic) ---
2025-11-23 22:02:48,893 - single_call_gemini_resolver - INFO - ======================================================================
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f697' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 200, in resolve_vehicle
    logger.info(f"\U0001f697 RESOLVING: {year} {make} {model}")
Message: '\U0001f697 RESOLVING: 2015 Honda Civic'
Arguments: ()
2025-11-23 22:02:48,905 - single_call_gemini_resolver - INFO - ======================================================================
2025-11-23 22:02:48,905 - single_call_gemini_resolver - INFO - Vehicle Key: 2015_honda_civic
2025-11-23 22:02:48,905 - single_call_gemini_resolver - INFO - Run ID: 2a7d1e1722ec44158048a5268065b8f1
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4be' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 212, in resolve_vehicle
    logger.info("\n\U0001f4be Checking database cache...")
Message: '\n\U0001f4be Checking database cache...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f50d' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 213, in resolve_vehicle
    cached_data = self._fetch_from_cache(vehicle_key)
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 631, in _fetch_from_cache
    logger.info(f"\U0001f50d Checking database cache for vehicle_key: {vehicle_key}")
Message: '\U0001f50d Checking database cache for vehicle_key: 2015_honda_civic'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4cb' in position 47: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 213, in resolve_vehicle
    cached_data = self._fetch_from_cache(vehicle_key)
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 633, in _fetch_from_cache
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 35, in ensure_schema
    logger.info("\U0001f4cb Ensuring database schema exists...")
Message: '\U0001f4cb Ensuring database schema exists...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 52: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 213, in resolve_vehicle
    cached_data = self._fetch_from_cache(vehicle_key)
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 633, in _fetch_from_cache
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 36, in ensure_schema
    with _connect() as conn:
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 21, in _connect
    engine = create_database_engine()
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 87, in create_database_engine
    url = get_database_url()
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 54, in get_database_url
    logger.error(f"\u274c {error_msg}")
Message: '\u274c DATABASE_URL environment variable is required. Please set DATABASE_URL in your Streamlit Cloud secrets or environment variables. Example: DATABASE_URL=postgresql://user:pass@host.neon.tech/dbname?sslmode=require'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 633, in _fetch_from_cache
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 36, in ensure_schema
    with _connect() as conn:
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 21, in _connect
    engine = create_database_engine()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 87, in create_database_engine
    url = get_database_url()
          ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 55, in get_database_url
    raise ValueError(error_msg)
ValueError: DATABASE_URL environment variable is required. Please set DATABASE_URL in your Streamlit Cloud secrets or environment variables. Example: DATABASE_URL=postgresql://user:pass@host.neon.tech/dbname?sslmode=require

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 64: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 213, in resolve_vehicle
    cached_data = self._fetch_from_cache(vehicle_key)
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 746, in _fetch_from_cache
    logger.error(f"\u274c Cache lookup failed: {e}", exc_info=True)
Message: '\u274c Cache lookup failed: DATABASE_URL environment variable is required. Please set DATABASE_URL in your Streamlit Cloud secrets or environment variables. Example: DATABASE_URL=postgresql://user:pass@host.neon.tech/dbname?sslmode=require'
Arguments: ()
2025-11-23 22:02:48,915 - single_call_gemini_resolver - INFO - Cache miss - proceeding with API call
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4dd' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 225, in resolve_vehicle
    logger.info("\n\U0001f4dd Building prompt...")
Message: '\n\U0001f4dd Building prompt...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 229, in resolve_vehicle
    logger.info(f"\u2713 Prompt built in {prompt_time:.2f}ms")
Message: '\u2713 Prompt built in 0.00ms'
Arguments: ()
2025-11-23 22:02:48,916 - single_call_gemini_resolver - INFO - Prompt length: 1282 characters
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f310' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 236, in resolve_vehicle
    logger.info("\n\U0001f310 Calling Gemini API with Search Grounding...")
Message: '\n\U0001f310 Calling Gemini API with Search Grounding...'
Arguments: ()
2025-11-23 22:02:48,916 - single_call_gemini_resolver - INFO - Model: gemini-2.0-flash-exp
2025-11-23 22:02:48,916 - single_call_gemini_resolver - INFO - Config: {
  "tools": [
    {
      "google_search": {}
    }
  ],
  "temperature": 0
}
2025-11-23 22:02:48,918 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-11-23 22:02:58,793 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent "HTTP/1.1 200 OK"
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 267, in resolve_vehicle
    logger.info(f"\u2713 API call completed in {api_time:.2f}ms")
Message: '\u2713 API call completed in 9886.91ms'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4e6' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 296, in resolve_vehicle
    logger.info("\n\U0001f4e6 Parsing JSON response...")
Message: '\n\U0001f4e6 Parsing JSON response...'
Arguments: ()
2025-11-23 22:02:58,804 - single_call_gemini_resolver - INFO - Response text length: 3460 characters
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 322, in resolve_vehicle
    logger.info("\u2713 Removed markdown code block wrappers")
Message: '\u2713 Removed markdown code block wrappers'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 327, in resolve_vehicle
    logger.info(f"\u2713 JSON parsed in {parse_time:.2f}ms")
Message: '\u2713 JSON parsed in 1.00ms'
Arguments: ()
2025-11-23 22:02:58,806 - single_call_gemini_resolver - INFO - Fields in response: ['curb_weight', 'aluminum_engine', 'aluminum_rims', 'catalytic_converters']
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 350, in resolve_vehicle
    logger.info("\n\u2705 Validating and normalizing fields...")
Message: '\n\u2705 Validating and normalizing fields...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2713' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 354, in resolve_vehicle
    logger.info(f"\u2713 Validation completed in {validate_time:.2f}ms")
Message: '\u2713 Validation completed in 0.53ms'
Arguments: ()
2025-11-23 22:02:58,806 - single_call_gemini_resolver - INFO -   ò curb_weight: 2863.0 (status=found, confidence=0.60, citations=1)
2025-11-23 22:02:58,806 - single_call_gemini_resolver - INFO -   ò aluminum_engine: True (status=found, confidence=0.60, citations=1)
2025-11-23 22:02:58,806 - single_call_gemini_resolver - INFO -   ò aluminum_rims: True (status=found, confidence=0.60, citations=2)
2025-11-23 22:02:58,806 - single_call_gemini_resolver - INFO -   ò catalytic_converters: 1 (status=found, confidence=0.60, citations=2)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4be' in position 65: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 368, in resolve_vehicle
    logger.info("\n\U0001f4be Persisting to database...")
Message: '\n\U0001f4be Persisting to database...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4be' in position 63: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 370, in resolve_vehicle
    self._persist_to_db(
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 760, in _persist_to_db
    logger.info(f"\U0001f4be Persisting to database: {year} {make} {model} (vehicle_key={vehicle_key}, run_id={run_id})")
Message: '\U0001f4be Persisting to database: 2015 Honda Civic (vehicle_key=2015_honda_civic, run_id=2a7d1e1722ec44158048a5268065b8f1)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4cb' in position 47: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 370, in resolve_vehicle
    self._persist_to_db(
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 761, in _persist_to_db
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 35, in ensure_schema
    logger.info("\U0001f4cb Ensuring database schema exists...")
Message: '\U0001f4cb Ensuring database schema exists...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\logging\__init__.py", line 1113, in emit
    stream.write(msg + self.terminator)
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 52: character maps to <undefined>
Call stack:
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 370, in resolve_vehicle
    self._persist_to_db(
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 761, in _persist_to_db
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 36, in ensure_schema
    with _connect() as conn:
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 21, in _connect
    engine = create_database_engine()
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 87, in create_database_engine
    url = get_database_url()
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 54, in get_database_url
    logger.error(f"\u274c {error_msg}")
Message: '\u274c DATABASE_URL environment variable is required. Please set DATABASE_URL in your Streamlit Cloud secrets or environment variables. Example: DATABASE_URL=postgresql://user:pass@host.neon.tech/dbname?sslmode=require'
Arguments: ()
Traceback (most recent call last):
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 19, in test_resolver
    result = resolver.resolve_vehicle(2015, "Honda", "Civic")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 370, in resolve_vehicle
    self._persist_to_db(
  File "C:\Users\Sean\GameDev\RubyEstimator\single_call_gemini_resolver.py", line 761, in _persist_to_db
    ensure_schema()
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 36, in ensure_schema
    with _connect() as conn:
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 137, in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\persistence.py", line 21, in _connect
    engine = create_database_engine()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 87, in create_database_engine
    url = get_database_url()
          ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Sean\GameDev\RubyEstimator\database_config.py", line 55, in get_database_url
    raise ValueError(error_msg)
ValueError: DATABASE_URL environment variable is required. Please set DATABASE_URL in your Streamlit Cloud secrets or environment variables. Example: DATABASE_URL=postgresql://user:pass@host.neon.tech/dbname?sslmode=require

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 59, in <module>
    test_resolver()
  File "C:\Users\Sean\GameDev\RubyEstimator\verify_grounding.py", line 37, in test_resolver
    print(f"\u274c Error resolving real vehicle: {e}")
  File "C:\Users\Sean\AppData\Local\Programs\Python\Python311\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 0: character maps to <undefined>
